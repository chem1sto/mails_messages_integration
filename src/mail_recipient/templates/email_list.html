<html>
<head>
    <title>Email List</title>
    <script>
        const ws = new WebSocket(`ws://${window.location.host}/ws/email_list/`);
        ws.onopen = () => {
            ws.send(JSON.stringify({ action: 'fetch_emails' }));
        };
        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            if (data.type === 'email_list') {
                const emails = data.emails;
                const emailList = document.getElementById('email-list');
                emails.forEach(email => {
                    const li = document.createElement('li');
                    li.innerHTML = `<strong>Subject:</strong> ${email.subject}<br><strong>From:</strong> ${email.from}`;
                    emailList.appendChild(li);
                });
            }
        };
    </script>
</head>
<body>
    <h1>Email List</h1>
    <ul id="email-list"></ul>
</body>
</html>
